"use strict";(self.webpackChunksparklingv2=self.webpackChunksparklingv2||[]).push([[812],{1812:(P,T,i)=>{i.d(T,{e:()=>D});var v=i(8239),A=i(8002),Z=i(3342),y=i(2340),e=i(7716),f=i(2899),M=i(5708),m=i(6252),g=i(4758),U=i(6659),r=i(3679),p=i(8583);function _(a,c){if(1&a&&(e.TgZ(0,"option",58),e._uU(1),e.qZA()),2&a){const t=c.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function u(a,c){if(1&a&&(e.TgZ(0,"option",58),e._uU(1),e.qZA()),2&a){const t=c.$implicit;e.Q6J("value",t.id),e.xp6(1),e.AsE("",t.firstName," ",t.lastName,"")}}function d(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"div",32),e.TgZ(1,"label"),e._uU(2,"Select Cleaner"),e.qZA(),e.TgZ(3,"select",59),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).newBooking.cleaner=o}),e.TgZ(4,"option",35),e._uU(5,"Auto assign cleaner"),e.qZA(),e.YNc(6,u,2,3,"option",50),e.qZA(),e.qZA()}if(2&a){const t=c.ngIf,n=e.oxw(2);e.xp6(3),e.Q6J("ngModel",n.newBooking.cleaner),e.xp6(3),e.Q6J("ngForOf",t)}}function C(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"div",27),e.TgZ(2,"div",28),e.TgZ(3,"h4",29),e._uU(4),e.ALo(5,"date"),e.qZA(),e.qZA(),e.TgZ(6,"div",30),e.TgZ(7,"button",31),e._uU(8," Close "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",32),e.TgZ(10,"label"),e._uU(11,"Country "),e.TgZ(12,"span",33),e._uU(13,"Country"),e.qZA(),e.qZA(),e.TgZ(14,"select",34),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().newBooking.country=o}),e.TgZ(15,"option",35),e._uU(16,"Country"),e.qZA(),e.TgZ(17,"option",36),e._uU(18,"USA"),e.qZA(),e.TgZ(19,"option",37),e._uU(20,"UK"),e.qZA(),e.TgZ(21,"option",38),e._uU(22,"Nigeria"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",32),e.TgZ(24,"label"),e._uU(25,"Address "),e.TgZ(26,"span",33),e._uU(27,"*"),e.qZA(),e.qZA(),e.TgZ(28,"input",39),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().newBooking.name=o}),e.qZA(),e.qZA(),e.TgZ(29,"div",32),e.TgZ(30,"label"),e._uU(31,"Postal code "),e.TgZ(32,"span",33),e._uU(33,"*"),e.qZA(),e.qZA(),e.TgZ(34,"input",40),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().newBooking.postal=o}),e.qZA(),e.qZA(),e.TgZ(35,"div",32),e.TgZ(36,"label"),e._uU(37,"Start Period "),e.TgZ(38,"span",33),e._uU(39,"*"),e.qZA(),e.qZA(),e.TgZ(40,"input",41),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().newBooking.start=o}),e.qZA(),e.qZA(),e.TgZ(41,"div",32),e.TgZ(42,"label"),e._uU(43,"End Period "),e.TgZ(44,"span",33),e._uU(45,"*"),e.qZA(),e.qZA(),e.TgZ(46,"input",42),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().newBooking.end=o}),e.qZA(),e.qZA(),e.TgZ(47,"div",32),e.TgZ(48,"label"),e._uU(49,"Property Details "),e.TgZ(50,"span",33),e._uU(51,"*"),e.qZA(),e.qZA(),e.TgZ(52,"textarea",43),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().newBooking.description=o}),e.qZA(),e.qZA(),e.TgZ(53,"div",32),e.TgZ(54,"label"),e._uU(55,"Cleaning Frequency "),e.TgZ(56,"span",33),e._uU(57,"*"),e.qZA(),e.qZA(),e.TgZ(58,"select",44),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().newBooking.frequency=o}),e.TgZ(59,"option",35),e._uU(60,"Cleaning frequency"),e.qZA(),e.TgZ(61,"option",45),e._uU(62,"Weekly"),e.qZA(),e.TgZ(63,"option",46),e._uU(64,"Fortnightly"),e.qZA(),e.TgZ(65,"option",47),e._uU(66,"One-off"),e.qZA(),e.TgZ(67,"option",48),e._uU(68,"Multiple days a week"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(69,"div",32),e.TgZ(70,"label"),e._uU(71,"Pricing "),e.TgZ(72,"span",33),e._uU(73,"*"),e.qZA(),e.qZA(),e.TgZ(74,"select",49),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().setAmount(o)})("ngModelChange",function(o){return e.CHM(t),e.oxw().newBooking.pricing=o}),e.TgZ(75,"option",35),e._uU(76,"Select Pricing"),e.qZA(),e.YNc(77,_,2,2,"option",50),e.ALo(78,"async"),e.qZA(),e.qZA(),e.TgZ(79,"div",32),e.TgZ(80,"label"),e._uU(81,"Extra Service"),e.qZA(),e.TgZ(82,"select",51),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().newBooking.extra_service=o}),e.TgZ(83,"option",35),e._uU(84,"Extra Services"),e.qZA(),e.TgZ(85,"option",52),e._uU(86,"Ironing"),e.qZA(),e.TgZ(87,"option",53),e._uU(88,"Oven cleaning"),e.qZA(),e.TgZ(89,"option",54),e._uU(90,"Fridge cleaning"),e.qZA(),e.TgZ(91,"option",55),e._uU(92,"window cleaning"),e.qZA(),e.TgZ(93,"option",56),e._uU(94,"Laundry cleaning supplies and detergents"),e.qZA(),e.qZA(),e.qZA(),e.YNc(95,d,7,2,"div",57),e.ALo(96,"async"),e.TgZ(97,"div",32),e.TgZ(98,"label",33),e._uU(99),e.qZA(),e.qZA(),e.qZA()}if(2&a){const t=e.oxw();e.xp6(4),e.hij("Create Booking ",e.lcZ(5,15,t.selectedPeriod),""),e.xp6(10),e.Q6J("ngModel",t.newBooking.country),e.xp6(14),e.Q6J("ngModel",t.newBooking.name),e.xp6(6),e.Q6J("ngModel",t.newBooking.postal),e.xp6(6),e.s9C("min",t.today),e.Q6J("ngModel",t.newBooking.start),e.xp6(6),e.s9C("min",t.today),e.Q6J("ngModel",t.newBooking.end),e.xp6(6),e.Q6J("ngModel",t.newBooking.description),e.xp6(6),e.Q6J("ngModel",t.newBooking.frequency),e.xp6(16),e.Q6J("ngModel",t.newBooking.pricing),e.xp6(3),e.Q6J("ngForOf",e.lcZ(78,17,t.plans$)),e.xp6(5),e.Q6J("ngModel",t.newBooking.extra_service),e.xp6(13),e.Q6J("ngIf",e.lcZ(96,19,t.cleaners$)),e.xp6(4),e.Oqu(t.message)}}function x(a,c){if(1&a&&(e.TgZ(0,"div",62),e.TgZ(1,"div",63),e.TgZ(2,"button",64),e._uU(3),e.TgZ(4,"small"),e._uU(5),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",65),e.TgZ(7,"div",66),e._uU(8),e.qZA(),e.qZA(),e.qZA()),2&a){const t=c.$implicit,n=c.index;e.xp6(2),e.uIk("data-target","#eventList_"+n),e.xp6(1),e.hij(" ",t.postal," "),e.xp6(2),e.AsE("",t.start," - ",t.end,""),e.xp6(1),e.MGl("id","eventList_",n,""),e.xp6(2),e.gL8(" ",t.cleaner," ",t.postal," ",t.country," ",t.extra_service," ",t.frequency," ",t.description," ")}}function b(a,c){if(1&a&&(e.TgZ(0,"div",60),e.TgZ(1,"h4",29),e._uU(2),e.ALo(3,"date"),e.qZA(),e.YNc(4,x,9,11,"div",61),e.qZA()),2&a){const t=e.oxw();e.xp6(2),e.hij("Bookings on ",e.lcZ(3,2,t.selectedPeriod),""),e.xp6(2),e.Q6J("ngForOf",t.eventList)}}function B(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"button",67),e.NdJ("click",function(){return e.CHM(t),e.oxw().submit()}),e._uU(1," Save "),e.qZA()}}function q(a,c){1&a&&(e.TgZ(0,"button",68),e._uU(1," Download "),e.qZA())}let D=(()=>{class a{constructor(t,n,o,s,E,O){this._ds=t,this.flutterwave=n,this._ps=o,this._us=s,this._bs=E,this.crf=O,this.id="calendar",this.tagetCreate=!1,this.canCreate=!1,this.selectedPeriod=null,this.today=new Date,this.eventList=[],this.reference="ref-27535012752945",this.cleaners$=this._us.cleaners$,this.publicKey=y.N.flutter_public_key,this.newBooking={postal:"",start:this.today,end:null,name:"",description:"",frequency:"",extra_service:"",color:"fc-bg-default",icon:"circle",cleaner:null,country:"",pricing:null,payment:null},this.message="",this.amount=1,this.customizations={title:"Chow Cheap",description:"Make your final payment for this order and get your item delivered ASAP!",logo:"https://flutterwave.com/images/logo-colored.svg"},this.meta={counsumer_id:"7898",consumer_mac:"kjs9s8ss7dd"},this.user=null,this.customerDetails={name:"Demo Customer  Name",amount:0,email:"customer@mail.com",phone_number:"08100000000"},this.calendar=l=>jQuery(`#${this.id}`).fullCalendar(l),this.params={themeSystem:"bootstrap4",businessHours:!1,defaultView:"month",editable:!0,header:{left:"title",center:"month,agendaWeek,agendaDay",right:"today prev,next"},events:this.eventList,dayClick:l=>{this.clickedOnDay(l),jQuery("#modal-view-event-add").modal()},eventClick:(l,h,k)=>{jQuery(".event-icon").html("<i class='fa fa-"+l.icon+"'></i>"),jQuery(".event-title").html(l.title),jQuery(".event-postal").html(l.postal),jQuery(".event-country").html(l.country),jQuery(".event-frequency").html(l.frequency),jQuery(".event-start").html(l.start),jQuery(".event-end").html(l.end),jQuery(".event-cleaner").html(l.cleaner),jQuery(".event-extra_service").html(l.extra_service),jQuery(".event-body").html(l.description),jQuery(".eventUrl").attr("href",l.url),jQuery("#modal-view-event").modal()}},this.bookings$=this._bs.bookings$.pipe((0,A.U)(l=>l.map(h=>Object.assign(Object.assign({},h),{date:h.start,title:`${h.country} ${h.postal} Between ${h.from} to ${h.end}`}))),(0,Z.b)(l=>{this.eventList=l,this.params.events=this.eventList})),this.plans$=this._ps.plans$,this.paymentData={public_key:this.publicKey,tx_ref:this.generateReference(),amount:10,currency:"GBP, USD, NGN, CAD",payment_options:"card,ussd",meta:this.meta,customer:this.customerDetails,customizations:this.customizations},this.today.setDate(this.today.getDate()-1),this.today=this.today.toISOString().slice(0,16)}ngOnDestroy(){}payViaPromise(){var t=this;return(0,v.Z)(function*(){return t.flutterwave.asyncInlinePay(t.paymentData)})()}generateReference(){return(new Date).getTime().toString()}setAmount(t){t?this.plans$.subscribe(n=>{var o;this.amount=null===(o=n.find(s=>s.id==t))||void 0===o?void 0:o.amount,this.customerDetails.amount=this.amount,this.paymentData.amount=this.amount}):this.amount=1}ngAfterViewInit(){this.bookings$.subscribe(t=>{this.eventList=t,t.length>0&&(this.params.events=t),this.crf.detectChanges(),this.calendar(this.params)})}ngOnInit(){this._us.user$.subscribe(t=>{this.user=t,t&&t.id&&(this.customerDetails.name=t.firstName,this.customerDetails.email=t.email,this.customerDetails.phone_number=t.phone,this.meta.counsumer_id=t.id)}),this.plans$.subscribe()}clickedOnDay(t){const n=new Date(this.today),o=new Date(t._d);this.selectedPeriod=o,this.newBooking.start=this.selectedPeriod,this.canCreate=n.getTime()<o.getTime(),this.tagetCreate&&(this.canCreate=!0)}submit(){var t=this;return(0,v.Z)(function*(){let n="";t.message="",t.newBooking.country||(n+="Country (*) is required"),t.newBooking.postal||(n+="Postal (*) is required"),t.newBooking.name||(n+="Address (*) is required"),t.newBooking.start||(n+="Start date (*) is required"),t.newBooking.end||(n+="End date (*) is required"),t.newBooking.description||(n+="Description (*) is required"),t.newBooking.frequency||(n+="Frequency (*) is required"),t.newBooking.pricing||(n+="Pricing (*) is required"),n.length>1?t.message=n:yield t.payViaPromise().then(o=>{"successful"==o.status?(t.newBooking.payment=o,t.newBooking.status=o.status,t.newBooking.created_at=t.today,t.newBooking.updated_at=t.today,t.newBooking.title=void 0,t.newBooking.date=void 0,t.newBooking.user=t.user,t._bs.add(t.newBooking).subscribe(s=>{t.newBooking={postal:"",start:t.today,end:null,description:"",name:"",frequency:"",extra_service:"",color:"fc-bg-default",icon:"circle",cleaner:null,country:"",pricing:null,user:null,payment:null,status:"",created_at:"",updated_at:""},t.message="New booking created.";const E=document.getElementById("dismisscreateModal");E&&E.click(),t._ds.openSuccessNotification("New Booking Created","Successfully placed a new booking"),t.bookings$.subscribe(O=>{t.eventList=O,t.params.events=O,t.crf.detectChanges(),t.calendar(t.params)})})):t.message="Issues with payment from payment gateway. Please rectify payment issues with https://flutterwave.com/",t.flutterwave.closePaymentModal(5)}).finally(()=>{t.bookings$.subscribe(o=>{t.crf.detectChanges(),t.calendar(t.params)})})})()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(f.U),e.Y36(M.Bh),e.Y36(m.D),e.Y36(g.K),e.Y36(U.q),e.Y36(e.sBO))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-calendar"]],inputs:{id:"id",tagetCreate:"tagetCreate"},decls:30,vars:5,consts:[[1,"pd-20","card-box","mb-30"],[1,"calendar-wrap"],[3,"id"],["id","modal-view-event",1,"modal","modal-top","fade","calendar-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-body"],[1,"h4"],[1,"event-icon","weight-400","mr-3"],[1,"event-title"],[1,"event-postal"],[1,"event-country"],[1,"event-frequency"],[1,"event-start"],[1,"event-end"],[1,"event-cleaner"],[1,"event-body"],[1,"event-extra_service"],[1,"modal-footer"],["type","button","id","dismisscreateModal","data-dismiss","modal",1,"btn","btn-primary"],["id","modal-view-event-add",1,"modal","modal-top","fade","calendar-modal"],[1,"modal-dialog","modal-lg","modal-dialog-centered"],["id","add-event"],["class","modal-body",4,"ngIf"],["class","modal-body","id","accordion",4,"ngIf"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button","class","btn btn-primary",4,"ngIf"],[1,"row"],[1,"col-9"],[1,"text-blue","h4","mb-10"],[1,"col-3","text-right"],["type","button","data-dismiss","modal","id","closeCreateModal",1,"btn","btn-sm","btn-outline-danger"],[1,"form-group"],[1,"text-danger"],["name","country",1,"form-control",3,"ngModel","ngModelChange"],["value","","selected",""],["value","USA"],["value","UK"],["value","Nigeria"],["type","text","name","name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","postal",1,"form-control",3,"ngModel","ngModelChange"],["type","datetime-local","name","start",1,"datetimepicker","form-control",3,"ngModel","min","ngModelChange"],["type","datetime-local","name","end",1,"datetimepicker","form-control",3,"ngModel","min","ngModelChange"],["name","description","placeholder","Enter your property details: Number of bedrooms and bathrooms and more",1,"form-control",3,"ngModel","ngModelChange"],["name","frequency",1,"form-control",3,"ngModel","ngModelChange"],["value","Weekly"],["value","Fortnightly"],["value","One-off"],["value","Multiple days a week"],["name","pricing",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","extra_service",1,"form-control",3,"ngModel","ngModelChange"],["value","Ironing"],["value","Oven cleaning"],["value","Fridge cleaning"],["value","window cleaning"],["value","Laundry cleaning supplies and detergents"],["class","form-group",4,"ngIf"],[3,"value"],["name","cleaner",1,"form-control",3,"ngModel","ngModelChange"],["id","accordion",1,"modal-body"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"card-header"],["data-toggle","collapse",1,"btn","btn-block"],["data-parent","#accordion",1,"collapse",3,"id"],[1,"card-body"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-primary"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"h4",7),e._UZ(8,"span",8),e._UZ(9,"span",9),e.qZA(),e._UZ(10,"div",10),e._UZ(11,"div",11),e._UZ(12,"div",12),e._UZ(13,"div",13),e._UZ(14,"div",14),e._UZ(15,"div",15),e._UZ(16,"div",16),e._UZ(17,"div",17),e.qZA(),e.TgZ(18,"div",18),e.TgZ(19,"button",19),e._uU(20," Close "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",20),e.TgZ(22,"div",21),e.TgZ(23,"div",5),e.TgZ(24,"form",22),e.YNc(25,C,100,21,"div",23),e.YNc(26,b,5,4,"div",24),e.TgZ(27,"div",18),e.YNc(28,B,2,0,"button",25),e.YNc(29,q,2,0,"button",26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("id",n.id),e.xp6(23),e.Q6J("ngIf",n.canCreate),e.xp6(1),e.Q6J("ngIf",!n.canCreate),e.xp6(2),e.Q6J("ngIf",n.canCreate),e.xp6(1),e.Q6J("ngIf",!n.canCreate))},directives:[r._Y,r.JL,r.F,p.O5,r.EJ,r.JJ,r.On,r.YN,r.Kr,r.Fj,p.sg],pipes:[p.uU,p.Ov],styles:[""]}),a})()},6659:(P,T,i)=>{i.d(T,{q:()=>U});var v=i(6215),A=i(5917),Z=i(1841),y=i(3190),e=i(7349),f=i(3342),M=i(2340),m=i(7716),g=i(4758);let U=(()=>{class r{constructor(_,u){this.http=_,this._us=u,this.listOfBookings=new v.X([]),this.bookings$=this.listOfBookings.asObservable(),this.getBookingApi$=this._us.user$.pipe((0,y.w)(d=>d&&d.id&&d.authToken?this.getBookingsApi(d.role,d):(0,A.of)([])),(0,e.d)()),this.apiUrl=M.N.api,this.user$=this._us.user$,this.getBookingApi$.subscribe(d=>this.listOfBookings.next(d))}getBookingsApi(_,u){if(_.includes("Admin"))return this.http.get(`${this.apiUrl}/bookings`);let d=(new Z.LE).set("user.userID",u.userID);return this.http.get(`${this.apiUrl}/bookings`,{params:d})}add(_){return this.http.post(`${this.apiUrl}/bookings`,_).pipe((0,f.b)(u=>{this.listOfBookings.value.unshift(u),this.listOfBookings.next([...this.listOfBookings.value])}))}delete(_){return this.http.delete(`${this.apiUrl}/bookings/${_}`).pipe((0,f.b)(u=>{const d=this.listOfBookings.value,C=d.findIndex(x=>x.id==_);C>-1&&(d.splice(C,1),this.listOfBookings.next(d))}))}}return r.\u0275fac=function(_){return new(_||r)(m.LFG(Z.eN),m.LFG(g.K))},r.\u0275prov=m.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},6252:(P,T,i)=>{i.d(T,{D:()=>m});var v=i(6215),A=i(2340),Z=i(3342),y=i(7349),e=i(7716),f=i(1841),M=i(4758);let m=(()=>{class g{constructor(r,p){this.http=r,this._us=p,this.listOfPlans=new v.X([]),this.plans$=this.listOfPlans.asObservable(),this.apiUrl=A.N.api,this.equalPlans=(_,u)=>{let d=!1;for(const[C,x]of Object.entries(_))Object.keys(u).some(b=>b==C)&&(d=!0);return d},this.getPlansApi$=this.getPlansApi().pipe((0,Z.b)(_=>{this.listOfPlans.next(_)}),(0,y.d)(1))}getPlansApi(){return this.http.get(`${this.apiUrl}/plans`)}add(r){this.listOfPlans.value.unshift(Object.assign(Object.assign({},r),{id:this.listOfPlans.value.length+1})),this.listOfPlans.next([...this.listOfPlans.value])}}return g.\u0275fac=function(r){return new(r||g)(e.LFG(f.eN),e.LFG(M.K))},g.\u0275prov=e.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()}}]);