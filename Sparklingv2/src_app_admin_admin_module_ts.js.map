{"version":3,"file":"src_app_admin_admin_module_ts.js","mappings":"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","sources":["./src/app/admin/admin-routing.module.ts","./src/app/admin/admin.component.ts","./src/app/admin/admin.component.html","./src/app/admin/admin.module.ts","./src/app/admin/setup/setup.component.ts","./src/app/admin/setup/setup.component.html","./src/app/shared/guards/auth/auth.guard.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { AdminComponent } from './admin.component';\r\nimport { UserResolver } from '../shared/resolvers/user/user.resolver';\r\nimport { AppResolver } from '../shared/resolvers/app/app.resolver';\r\nimport { AuthGuard } from '../shared/guards/auth/auth.guard';\r\nimport { CompanyResolver } from '../shared/resolvers/company/company.resolver';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: AdminComponent,\r\n    children: [\r\n      {\r\n        path: '',\r\n        loadChildren: () => import('./home/home.module').then(m => m.HomeModule)\r\n      },\r\n      {\r\n        path: 'home',\r\n        loadChildren: () => import('./home/home.module').then(m => m.HomeModule)\r\n      },\r\n      {\r\n        path: 'user-role',\r\n        loadChildren: () => import('./user-role/user-role.module').then(m => m.UserRoleModule)\r\n      },\r\n      {\r\n        path: 'file-manager',\r\n        loadChildren: () => import('./file-manager/file-manager.module').then(m => m.FileManagerModule)\r\n      },\r\n      {\r\n        path: 'recruitment',\r\n        loadChildren: () => import('./recruitment/recruitment.module').then(m => m.RecruitmentModule)\r\n      },\r\n      {\r\n        path: 'booking',\r\n        loadChildren: () => import('./booking/booking.module').then(m => m.BookingModule)\r\n      },\r\n      {\r\n        path: 'event',\r\n        loadChildren: () => import('./booking/booking.module').then(m => m.BookingModule)\r\n      },\r\n      {\r\n        path: 'leave-and-holiday',\r\n        loadChildren: () => import('./holiday/holiday.module').then(m => m.HolidayModule)\r\n      },\r\n      {\r\n        path: 'messanger',\r\n        loadChildren: () => import('./messanger/messanger.module').then(m => m.MessangerModule)\r\n      },\r\n      {\r\n        path: 'pricing',\r\n        loadChildren: () => import('./pricing/pricing.module').then(m=> m.PricingModule)\r\n      },\r\n      {\r\n        path: 'employee',\r\n        loadChildren: () => import('./employee/employee.module').then(m=> m.EmployeeModule)\r\n      },\r\n      {\r\n        path: 'calendar',\r\n        loadChildren: () => import('./attendance/attendance.module').then(m=> m.AttendanceModule)\r\n      },\r\n    ],\r\n    resolve:{\r\n      fromResolverUser: UserResolver\r\n    },\r\n    canActivate: [AuthGuard]\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AdminRoutingModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { CompanyService } from '../shared/services/company/company.service';\r\nimport { Observable, BehaviorSubject, throwError, of, Subject } from 'rxjs';\r\nimport { switchMap, skipWhile, shareReplay, map,tap, takeWhile, find } from 'rxjs/operators';\r\nimport { Company } from '../shared/models/Company';\r\nimport { AppService } from '../shared/services/client/app.service';\r\nimport { ActivatedRoute, ActivatedRouteSnapshot } from '@angular/router';\r\nimport { UserService } from '../shared/services/user/user.service';\r\nimport { SocketService } from '../shared/services/client/socket.service';\r\n\r\n@Component({\r\n  selector: 'app-admin',\r\n  templateUrl: './admin.component.html',\r\n  styleUrls: ['./admin.component.scss']\r\n})\r\nexport class AdminComponent implements OnInit {\r\n  // tobeResolved authenticated user data Observable\r\n  _user$:BehaviorSubject<any> = new BehaviorSubject<any>(null);\r\n  _company$:BehaviorSubject<any> = new BehaviorSubject<any>(null);\r\n  _listOfCompanies: Observable<any> = this._user$.pipe(\r\n    skipWhile(c => !c),\r\n    switchMap((res:any)=>{\r\n      if((<string[]>res.role).includes('Admin') || (<string[]>res.role).includes('Master')){\r\n          return this._cs.getAdminCompanysApi$(res.code).pipe(\r\n            tap(r=>{\r\n              this._cs.setlistOfCompanys = r;\r\n            })\r\n          )\r\n      }else{\r\n        return this._cs.getAdminCompanysApi$(res.code).pipe(\r\n            tap(r=>{\r\n              this._cs.setlistOfCompanys = r;\r\n            })\r\n          )\r\n      }\r\n    }),\r\n    shareReplay()\r\n  )\r\n  _subscriptions: Observable<any> = this._listOfCompanies.pipe(\r\n    skipWhile((c:any[]) => c.length < 1),\r\n    switchMap((res:any)=>{\r\n      let ownCompany;\r\n      if(this._cs.getSessionCompany()){\r\n        ownCompany = res.find((c:any)=>c.code == this._cs.getSessionCompany());\r\n      }\r\n      if(!ownCompany){\r\n        ownCompany = res[0];\r\n        this._cs.saveSessionCompany(ownCompany.code);\r\n      }\r\n      this._company$.next(ownCompany);\r\n      this._cs.company = ownCompany;\r\n      return this.appService.getAppSubscriptionApi({ \"company\": ownCompany.code, \"type\": \"App\", \"status\": \"Active\" });\r\n    }),\r\n    shareReplay()\r\n  );\r\n  apps: Observable<any> = this.appService.apps$;\r\n  listOfCompanies: Observable<Company[]> = this._cs.companys$;\r\n  companys: Observable<Company[]> = this._cs.getAdminCompanys$;\r\n\r\n  selectedcompany$: Observable<any> = this._cs.selectedcompany$;\r\n  onoingApp: any =null;\r\n  id: any = '';\r\n  code: any = '';\r\n  ongoingApp: Observable<any> = this.appService.onoingApp$;\r\n  listOfSubscribedApps$:Observable<any> = this.appService.listOfSubscribedApps$;\r\n  constructor(private _userService: UserService,\r\n              private _cs: CompanyService,\r\n              private appService: AppService,\r\n              private socket: SocketService,\r\n              private route: ActivatedRoute) { }\r\n\r\n  ngOnInit(): void {\r\n    this._user$.next(this.route.snapshot.data['fromResolverUser']);\r\n    this._user$.subscribe(c=>{\r\n      if(!c){\r\n\r\n      }\r\n    });\r\n    this._listOfCompanies.subscribe();\r\n    this._subscriptions.subscribe((subs:any[])=>{\r\n      this.appService.listOfSubscribedApps = subs;\r\n      if(subs.length > 0){\r\n        let app;\r\n        let sub;\r\n        if(this.appService.appcode){\r\n          sub = subs.find(ap=>ap.app.code == this.appService.appcode);\r\n        }\r\n        if(!sub){\r\n          sub = subs[0];\r\n        }\r\n        this.appService.onoingAppSub = sub;\r\n        app = sub.app;\r\n        this.appService.onoingApp = app;\r\n        this.appService.appcode = app.code;\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div>\r\n    <app-page-loader></app-page-loader>\r\n</div>\r\n\r\n<div>\r\n    <app-header></app-header>\r\n</div>\r\n\r\n<div *ngIf=\"ongoingApp | async\">\r\n    <app-right-sidebar [accessFullData]=\"ongoingApp | async\"></app-right-sidebar>\r\n</div>\r\n\r\n<div *ngIf=\"_user$ | async as user \">\r\n    <app-left-sidebar [user]=\"user\"></app-left-sidebar>\r\n</div>\r\n\r\n<ngx-spinner type=\"ball-scale-multiple\"></ngx-spinner>\r\n\r\n<div class=\"mobile-menu-overlay\" id=\"mobilemenuoverlay\"></div>\r\n\r\n<div class=\"main-container\">\r\n    <div class=\"xs-pd-20-10 pd-ltr-20\">  \r\n\r\n        <!-- \r\n            check role and\r\n            Get list of companies\r\n         -->\r\n           <!-- \r\n                get subscriptions of company where type=App orderby reverse\r\n            -->\r\n         <!--\r\n            get all apps from server;\r\n           -->\r\n            <!-- \r\n                mutate app and save;\r\n             -->\r\n            <!-- \r\n                check and select default app\r\n             -->\r\n             \r\n            \r\n        <div *ngIf=\"_user$  | async as user \">\r\n             <div *ngIf=\"listOfCompanies | async as lc \" class=\"row\">\r\n                <div *ngIf=\"listOfSubscribedApps$ | async as subscriptions\" class=\"col-md-12\">\r\n                    <router-outlet *ngIf=\"ongoingApp | async\"></router-outlet>\r\n                </div>\r\n                <div *ngIf=\"!(ongoingApp | async)\" class=\"col-md-12\">\r\n                    <app-setup [listOfCompanies]=\"lc\" [company]=\"_company$ | async\" [subscriptions]=\"listOfSubscribedApps$ | async\" [apps]=\"apps | async\" [ongoingApp]=\"ongoingApp | async\"></app-setup>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { CUSTOM_ELEMENTS_SCHEMA, NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { AdminRoutingModule } from './admin-routing.module';\r\n\r\nimport { SharedModule } from '../shared/shared.module';\r\nimport { AdminComponent } from './admin.component';\r\nimport { SetupComponent } from './setup/setup.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AdminComponent,\r\n    SetupComponent\r\n  ],\r\n  schemas: [CUSTOM_ELEMENTS_SCHEMA],\r\n  imports: [\r\n    CommonModule,\r\n    SharedModule,\r\n    AdminRoutingModule\r\n  ]\r\n})\r\nexport class AdminModule { }\r\n","import { Component, OnInit, Input } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { AppService } from 'src/app/shared/services/client/app.service';\r\n\r\n@Component({\r\n  selector: 'app-setup',\r\n  templateUrl: './setup.component.html',\r\n  styleUrls: ['./setup.component.scss']\r\n})\r\nexport class SetupComponent implements OnInit {\r\n  // apps: Observable<any> = this.appService.listOfApps;\r\n  @Input('apps') apps:any = [];\r\n  @Input('ongoingApp') ongoingApp:any = null;\r\n  @Input('listOfCompanies') listOfCompanies:any = [];\r\n  @Input('subscriptions') subscriptions:any = [];\r\n  @Input('company') company:any = null;\r\n  constructor(private appService: AppService) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"row\">\r\n    <div class=\"col-md-12\" id=\"stepOneAdminSetup\" *ngIf=\"!listOfCompanies || listOfCompanies.length < 1\">\r\n        <h2 class=\"mb-10\">Begin Journey</h2>\r\n        <h4 class=\"mb-10\">Please create a company to start your journey.</h4>\r\n        <button class=\"btn btn-primary\" data-backdrop=\"static\" data-toggle=\"modal\" data-target=\"#create-company-modal\" type=\"button\">\r\n            Create Company\r\n        </button>\r\n    </div>\r\n    <div *ngIf=\"listOfCompanies && listOfCompanies.length > 0\" class=\"col-md-12\">\r\n        <div *ngIf=\"!subscriptions || subscriptions.length < 1\" class=\"row\">\r\n            <h2 class=\"mb-10 col-md-12\">Almost there!</h2>\r\n            <h4 class=\"text-center p-2 col-md-12\">Subscribe to our Apps</h4>\r\n            <div class=\"col-md-4 p-2 app_item\" *ngFor=\"let app of apps;let i=index\">\r\n                <app-choose-app [id]=\"'admin_choseAppFrom_'+i\" [company]=\"company\"  [app]=\"app\" [height]=\"200\"> </app-choose-app>\r\n            </div>\r\n        </div>\r\n        <div *ngIf=\"subscriptions && subscriptions.length > 0\" class=\"row\">\r\n            <h2 class=\"mb-10 col-md-12\">Welcome to Zinder!</h2>\r\n            <h4 class=\"text-center p-2 col-md-12\">Proceed to platform</h4>\r\n            <div class=\"col-md-4 p-2 app_item\" *ngFor=\"let app of apps;let i=index\">\r\n                <app-choose-app [id]=\"'admin_choseAppFrom_'+i\" [company]=\"company\"   [app]=\"app\" [height]=\"200\"> </app-choose-app>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { Injectable } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot, UrlTree } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\nimport { shareReplay, last,tap } from 'rxjs/operators';\r\nimport { AuthService } from '../../services/Index';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AuthGuard implements CanActivate {\r\n  public setsessionAuthToken: string | null;\r\n  constructor(private _auth:AuthService, private router: Router){\r\n    this.setsessionAuthToken = this._auth.sessionAuth;\r\n  }\r\n  canActivate(\r\n    route: ActivatedRouteSnapshot,\r\n    state: RouterStateSnapshot): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree {\r\n      this.setsessionAuthToken = this._auth.sessionAuth;\r\n      return this._auth.isLoggedIn().finally(\r\n        ()=>{\r\n          if(!this._auth.isAuthenticated){\r\n            this.router.navigate(['auth/login']);\r\n          }\r\n        }\r\n      );\r\n  }\r\n\r\n  valid(created_at:any){\r\n    let now = new Date(Date.now());\r\n    let created = new Date(created_at);\r\n    return now.getTime() - created.getTime() <( 60 * 60 * 1000 * 24 * 2); // less than 2 days\r\n  }\r\n  \r\n}\r\n\r\n\r\n// 149.34.178.243\r\n\r\n\r\n// 102.89.34.108"],"names":["BehaviorSubject","switchMap","skipWhile","shareReplay","tap","i0","AdminComponent","constructor","_userService","_cs","appService","socket","route","_user$","pipe","c","res","role","includes","getAdminCompanysApi$","code","r","setlistOfCompanys","_listOfCompanies","length","ownCompany","getSessionCompany","find","saveSessionCompany","_company$","next","company","getAppSubscriptionApi","apps$","companys$","getAdminCompanys$","selectedcompany$","onoingApp$","listOfSubscribedApps$","ngOnInit","snapshot","data","subscribe","_subscriptions","subs","listOfSubscribedApps","app","sub","appcode","ap","onoingAppSub","onoingApp","selectors","decls","vars","consts","template"],"sourceRoot":"webpack:///"}